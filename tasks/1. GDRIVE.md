# –≠—Ç–∞–ø 4: Google Drive –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

## –¶–µ–ª—å
–î–æ–±–∞–≤–∏—Ç—å Google Drive –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö —Å –µ–¥–∏–Ω—ã–º –ø–æ–∏—Å–∫–æ–º –ø–æ –ª–æ–∫–∞–ª—å–Ω—ã–º –∏ –æ–±–ª–∞—á–Ω—ã–º —Ñ–∞–π–ª–∞–º.

---

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (–∞–∫—Ç—É–∞–ª—å–Ω–æ)

### ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **SecureStorage** ‚Äî Core C++ (`core/src/Security/SecureStorage.cpp`)
  - Windows: Credential Manager (DPAPI)
  - Android: AES-256-GCM —Ñ–∞–π–ª—ã –≤ –ø—Ä–∏–≤–∞—Ç–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
  - –ö–ª—é—á–∏: `familyvault.family_secret`, `familyvault.device_id`
- **Database** ‚Äî SQLite —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ (–≤–µ—Ä—Å–∏—è 2)
- **FFI bridge** ‚Äî `NativeBridge` –¥–ª—è –≤—ã–∑–æ–≤–∞ Core –∏–∑ Flutter

### ‚ùå –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å
- –¢–∞–±–ª–∏—Ü–∞ `cloud_accounts` (–º–∏–≥—Ä–∞—Ü–∏—è 3)
- HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è Google Drive API
- OAuth2 flow

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        Flutter Layer                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  GoogleAuthService          ‚îÇ  GoogleDriveService               ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ startOAuth()           ‚îÇ  ‚îú‚îÄ‚îÄ listFiles()                  ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ handleCallback()       ‚îÇ  ‚îú‚îÄ‚îÄ downloadFile()               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ refreshToken()         ‚îÇ  ‚îî‚îÄ‚îÄ syncChanges()                ‚îÇ
‚îÇ           ‚îÇ                            ‚îÇ                         ‚îÇ
‚îÇ           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚îÇ
‚îÇ                      ‚ñº                                           ‚îÇ
‚îÇ              CloudAccountProvider                                ‚îÇ
‚îÇ              ‚îú‚îÄ‚îÄ accounts (list)                                 ‚îÇ
‚îÇ              ‚îú‚îÄ‚îÄ addAccount()                                    ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ removeAccount()                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                         FFI Bridge                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                        Core C++ Layer                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  SecureStorage              ‚îÇ  Database                          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ store/retrieve tokens  ‚îÇ  ‚îú‚îÄ‚îÄ cloud_accounts (metadata)    ‚îÇ
‚îÇ      "gdrive_account_{id}"  ‚îÇ  ‚îî‚îÄ‚îÄ cloud_files (index)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–æ—á–µ–º—É OAuth –≤ Flutter, –∞ –Ω–µ –≤ Core?

| –ê—Å–ø–µ–∫—Ç | Flutter | Core C++ |
|--------|---------|----------|
| –û—Ç–∫—Ä—ã—Ç–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞ | ‚úÖ `url_launcher` | ‚ùå –°–ª–æ–∂–Ω–æ –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ |
| HTTP callback —Å–µ—Ä–≤–µ—Ä | ‚úÖ `dart:io HttpServer` | ‚ö†Ô∏è –ù—É–∂–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ |
| Async HTTP –∑–∞–ø—Ä–æ—Å—ã | ‚úÖ `http` package | ‚ö†Ô∏è `cpp-httplib` (—Ç–æ–ª—å–∫–æ sync) |
| Android deep links | ‚úÖ –ù–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | ‚ùå –¢—Ä–µ–±—É–µ—Ç JNI |

**–†–µ—à–µ–Ω–∏–µ:** OAuth –∏ HTTP –∑–∞–ø—Ä–æ—Å—ã –≤ Flutter, —Ç–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è —á–µ—Ä–µ–∑ Core SecureStorage.

---

## –ó–∞–¥–∞—á–∞ 4.0: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –º–∏–≥—Ä–∞—Ü–∏—è –ë–î

### Flutter –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (pubspec.yaml)
```yaml
dependencies:
  # OAuth2 –∏ HTTP
  http: ^1.2.0
  url_launcher: ^6.2.0
  
  # –î–ª—è localhost callback –Ω–∞ desktop
  shelf: ^1.4.0
  shelf_router: ^1.1.0
```

### –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î (Migration 3)
```sql
-- Cloud accounts (—Ç–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, —Ç–æ–∫–µ–Ω—ã –≤ SecureStorage)
CREATE TABLE IF NOT EXISTS cloud_accounts (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    type TEXT NOT NULL,           -- 'google_drive'
    email TEXT NOT NULL,
    display_name TEXT,
    avatar_url TEXT,
    -- –¢–æ–∫–µ–Ω—ã –ù–ï —Ö—Ä–∞–Ω—è—Ç—Å—è –∑–¥–µ—Å—å! –°–º. SecureStorage
    change_token TEXT,            -- –î–ª—è incremental sync
    last_sync_at INTEGER,
    file_count INTEGER DEFAULT 0,
    enabled INTEGER DEFAULT 1,
    created_at INTEGER DEFAULT (strftime('%s', 'now')),
    UNIQUE(type, email)
);

-- Cloud watched folders (–∫–∞–∫–∏–µ –ø–∞–ø–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å)
CREATE TABLE IF NOT EXISTS cloud_watched_folders (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    account_id INTEGER NOT NULL,
    cloud_id TEXT NOT NULL,       -- Google Drive folder ID
    name TEXT NOT NULL,
    path TEXT,                    -- Breadcrumb path (e.g. "My Drive/Photos")
    enabled INTEGER DEFAULT 1,
    last_sync_at INTEGER,
    
    UNIQUE(account_id, cloud_id),
    FOREIGN KEY (account_id) REFERENCES cloud_accounts(id) ON DELETE CASCADE
);

-- Cloud files (–∏–Ω–¥–µ–∫—Å —Ñ–∞–π–ª–æ–≤ –∏–∑ –æ–±–ª–∞–∫–∞)
CREATE TABLE IF NOT EXISTS cloud_files (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    account_id INTEGER NOT NULL,
    cloud_id TEXT NOT NULL,       -- Google Drive file ID
    name TEXT NOT NULL,
    mime_type TEXT,
    size INTEGER DEFAULT 0,
    created_at INTEGER,
    modified_at INTEGER,
    parent_cloud_id TEXT,         -- Folder ID in cloud
    path TEXT,                    -- Reconstructed path
    thumbnail_url TEXT,
    web_view_url TEXT,
    checksum TEXT,                -- MD5 from Google
    indexed_at INTEGER DEFAULT (strftime('%s', 'now')),
    
    UNIQUE(account_id, cloud_id),
    FOREIGN KEY (account_id) REFERENCES cloud_accounts(id) ON DELETE CASCADE
);

CREATE INDEX IF NOT EXISTS idx_cloud_files_account ON cloud_files(account_id);
CREATE INDEX IF NOT EXISTS idx_cloud_files_name ON cloud_files(name);
CREATE INDEX IF NOT EXISTS idx_cloud_files_modified ON cloud_files(modified_at DESC);

-- FTS –¥–ª—è cloud files
CREATE VIRTUAL TABLE IF NOT EXISTS cloud_files_fts USING fts5(
    name,
    path,
    tokenize='unicode61 remove_diacritics 2'
);

CREATE TRIGGER IF NOT EXISTS cloud_files_fts_insert AFTER INSERT ON cloud_files BEGIN
    INSERT INTO cloud_files_fts(rowid, name, path)
    VALUES (new.id, new.name, COALESCE(new.path, ''));
END;

CREATE TRIGGER IF NOT EXISTS cloud_files_fts_delete AFTER DELETE ON cloud_files BEGIN
    DELETE FROM cloud_files_fts WHERE rowid = old.id;
END;

CREATE TRIGGER IF NOT EXISTS cloud_files_fts_update AFTER UPDATE OF name, path ON cloud_files BEGIN
    DELETE FROM cloud_files_fts WHERE rowid = old.id;
    INSERT INTO cloud_files_fts(rowid, name, path)
    VALUES (new.id, new.name, COALESCE(new.path, ''));
END;
```

### SecureStorage –∫–ª—é—á–∏ –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤
```
gdrive_account_{account_id} = {
    "access_token": "ya29...",
    "refresh_token": "1//...",
    "expires_at": 1699999999,
    "token_type": "Bearer"
}
```

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏
- [ ] –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ pubspec.yaml
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è 3 —Å–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—ã cloud_accounts –∏ cloud_files
- [ ] FTS –¥–ª—è cloud_files —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## –ó–∞–¥–∞—á–∞ 4.1: OAuth2 Service ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è Google

### –û–ø–∏—Å–∞–Ω–∏–µ
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å OAuth2 Authorization Code flow —Å PKCE –≤ Flutter.

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (Google Cloud Console)
1. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç: https://console.cloud.google.com/
2. –í–∫–ª—é—á–∏—Ç—å Google Drive API
3. OAuth consent screen ‚Üí External ‚Üí Add scopes:
   - `https://www.googleapis.com/auth/drive.readonly`
   - `https://www.googleapis.com/auth/userinfo.email`
4. Credentials ‚Üí Create OAuth Client ID:
   - **Desktop**: Application type = Desktop
   - **Android**: Package name = `com.familyvault.familyvault`
   - **Web** (–¥–ª—è redirect): Authorized redirect URIs = `http://localhost:8089/callback`

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Flutter)
```dart
// lib/core/services/google_auth_service.dart

class GoogleCredentials {
  final String accessToken;
  final String refreshToken;
  final int expiresAt;
  final String email;
  final String? displayName;
  final String? avatarUrl;
}

class GoogleAuthService {
  static const _clientId = 'YOUR_CLIENT_ID.apps.googleusercontent.com';
  static const _clientSecret = 'YOUR_CLIENT_SECRET'; // Desktop only
  static const _redirectPort = 8089;
  static const _scopes = [
    'https://www.googleapis.com/auth/drive.readonly',
    'https://www.googleapis.com/auth/userinfo.email',
    'https://www.googleapis.com/auth/userinfo.profile',
  ];

  /// –ù–∞—á–∞—Ç—å OAuth flow
  /// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç URL –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
  Future<String> startAuthFlow();

  /// –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –∏ –∂–¥–∞—Ç—å callback
  /// Desktop: localhost:8089/callback
  /// Mobile: deep link –∏–ª–∏ manual code entry
  Future<GoogleCredentials?> waitForCallback();

  /// –û–±–Ω–æ–≤–∏—Ç—å access token –∏—Å–ø–æ–ª—å–∑—É—è refresh token
  Future<GoogleCredentials?> refreshAccessToken(String refreshToken);

  /// –û—Ç–æ–∑–≤–∞—Ç—å —Ç–æ–∫–µ–Ω (–ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞)
  Future<bool> revokeToken(String token);
}
```

### OAuth Flow (Desktop)
```
1. generateCodeVerifier() ‚Üí random 43-128 chars
2. generateCodeChallenge(verifier) ‚Üí SHA256 + base64url
3. Build auth URL:
   https://accounts.google.com/o/oauth2/v2/auth
   ?client_id={CLIENT_ID}
   &redirect_uri=http://localhost:8089/callback
   &response_type=code
   &scope=drive.readonly+userinfo.email+userinfo.profile
   &access_type=offline
   &prompt=consent
   &code_challenge={challenge}
   &code_challenge_method=S256

4. url_launcher.launch(authUrl)
5. Start HttpServer on localhost:8089
6. Wait for GET /callback?code=...
7. Exchange code for tokens:
   POST https://oauth2.googleapis.com/token
   {
     client_id, client_secret, code,
     redirect_uri, grant_type=authorization_code,
     code_verifier
   }
8. Get user info:
   GET https://www.googleapis.com/oauth2/v2/userinfo
   Authorization: Bearer {access_token}
9. Return GoogleCredentials
```

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏
- [ ] OAuth flow –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä
- [ ] Callback –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –Ω–∞ localhost
- [ ] –¢–æ–∫–µ–Ω—ã –ø–æ–ª—É—á–µ–Ω—ã –∏ –≤–∞–ª–∏–¥–Ω—ã
- [ ] User info (email, name) –ø–æ–ª—É—á–µ–Ω
- [ ] PKCE –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- [ ] –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Windows –∏ Android

---

## –ó–∞–¥–∞—á–∞ 4.2: Cloud Account Manager ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏

### –û–ø–∏—Å–∞–Ω–∏–µ
–°–µ—Ä–≤–∏—Å –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è, —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –æ–±–ª–∞—á–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤.

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Flutter)
```dart
// lib/core/services/cloud_account_service.dart

class CloudAccount {
  final int id;
  final String type; // 'google_drive'
  final String email;
  final String? displayName;
  final String? avatarUrl;
  final DateTime? lastSyncAt;
  final int fileCount;
  final bool enabled;
}

class CloudAccountService {
  final NativeBridge _bridge;
  final GoogleAuthService _authService;

  /// –î–æ–±–∞–≤–∏—Ç—å Google Drive –∞–∫–∫–∞—É–Ω—Ç
  /// 1. OAuth flow
  /// 2. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –≤ SecureStorage
  /// 3. –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ cloud_accounts
  Future<CloudAccount> addGoogleDriveAccount();

  /// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã
  Future<List<CloudAccount>> getAccounts();

  /// –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞–∫–∫–∞—É–Ω—Ç–∞ (–∏–∑ SecureStorage)
  Future<GoogleCredentials?> getCredentials(int accountId);

  /// –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –µ—Å–ª–∏ –∏—Å—Ç—ë–∫
  Future<GoogleCredentials?> ensureValidToken(int accountId);

  /// –£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç
  /// 1. –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª—ã –∏–∑ –∏–Ω–¥–µ–∫—Å–∞
  /// 2. –£–¥–∞–ª–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –∏–∑ SecureStorage
  /// 3. –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å –∏–∑ cloud_accounts
  Future<void> removeAccount(int accountId);

  /// –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç
  Future<void> setEnabled(int accountId, bool enabled);

  /// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–ø–∫–∞–º–∏ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
  Future<List<CloudWatchedFolder>> getWatchedFolders(int accountId);
  Future<void> addWatchedFolder(int accountId, String cloudId, String name, String path);
  Future<void> removeWatchedFolder(int accountId, int folderId);
}
```

### C API —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
```c
// familyvault_c.h ‚Äî –¥–æ–±–∞–≤–∏—Ç—å

// Cloud accounts (metadata only, tokens in SecureStorage)
FV_API int fv_cloud_account_add(FVDatabase db, const char* type, 
                                 const char* email, const char* display_name);
FV_API char* fv_cloud_account_list(FVDatabase db);  // JSON array
FV_API bool fv_cloud_account_remove(FVDatabase db, int account_id);
FV_API bool fv_cloud_account_set_enabled(FVDatabase db, int account_id, bool enabled);
FV_API bool fv_cloud_account_update_sync(FVDatabase db, int account_id, 
                                          int file_count, const char* change_token);

// Cloud watched folders
FV_API bool fv_cloud_folder_add(FVDatabase db, int account_id, const char* cloud_id, 
                               const char* name, const char* path);
FV_API bool fv_cloud_folder_remove(FVDatabase db, int folder_id);
FV_API char* fv_cloud_folder_list(FVDatabase db, int account_id); // JSON array
```

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏
- [ ] –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å Google –∞–∫–∫–∞—É–Ω—Ç —á–µ—Ä–µ–∑ OAuth
- [ ] –¢–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ SecureStorage (–Ω–µ –≤ –ë–î!)
- [ ] Metadata —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ cloud_accounts —Ç–∞–±–ª–∏—Ü–µ
- [ ] –ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç (—Ç–æ–∫–µ–Ω—ã + —Ñ–∞–π–ª—ã —É–¥–∞–ª—è—é—Ç—Å—è)
- [ ] –ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç

---

## –ó–∞–¥–∞—á–∞ 4.3: Google Drive Client ‚Äî —Ä–∞–±–æ—Ç–∞ —Å API

### –û–ø–∏—Å–∞–Ω–∏–µ
HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è Google Drive API v3.

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Flutter)
```dart
// lib/core/services/google_drive_service.dart

class GoogleDriveFile {
  final String id;
  final String name;
  final String mimeType;
  final int size;
  final DateTime? createdTime;
  final DateTime? modifiedTime;
  final String? thumbnailLink;
  final String? webViewLink;
  final List<String> parents;
  final String? md5Checksum;
  final bool trashed;
}

class GoogleDriveChanges {
  final List<GoogleDriveFile> changed;
  final List<String> removed; // file IDs
  final String newStartPageToken;
}

class GoogleDriveService {
  final CloudAccountService _accountService;
  
  GoogleDriveService(this._accountService);

  /// –õ–∏—Å—Ç–∏–Ω–≥ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)
  Stream<GoogleDriveFile> listAllFiles(int accountId, {
    String? query,
    bool includeTrash = false,
  });
  
  /// –õ–∏—Å—Ç–∏–Ω–≥ –ø–∞–ø–æ–∫ (–¥–ª—è –≤—ã–±–æ—Ä–∞)
  Future<List<GoogleDriveFile>> listFolders(int accountId, {String? parentId});

  /// –ü–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª –ø–æ ID
  Future<GoogleDriveFile?> getFile(int accountId, String fileId);

  /// –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
  Future<Uint8List> downloadFile(int accountId, String fileId);

  /// –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª –≤ –ø—É—Ç—å
  Future<void> downloadFileToPath(int accountId, String fileId, String destPath);

  /// –ü–æ–ª—É—á–∏—Ç—å thumbnail
  Future<Uint8List?> getThumbnail(int accountId, String thumbnailLink);

  /// Changes API
  Future<String> getStartPageToken(int accountId);
  Future<GoogleDriveChanges> getChanges(int accountId, String pageToken);
}
```

### API Endpoints
```
Base URL: https://www.googleapis.com/drive/v3

GET /files
  ?q={query}
  &pageSize=100
  &pageToken={token}
  &fields=nextPageToken,files(id,name,mimeType,size,createdTime,modifiedTime,
          thumbnailLink,webViewLink,parents,md5Checksum,trashed)
  &orderBy=modifiedTime desc

GET /files/{fileId}
  ?fields=id,name,mimeType,size,createdTime,modifiedTime,thumbnailLink,
          webViewLink,parents,md5Checksum,trashed

GET /files/{fileId}?alt=media
  ‚Üí Binary file content

GET /changes/startPageToken

GET /changes
  ?pageToken={token}
  &fields=nextPageToken,newStartPageToken,changes(fileId,removed,file(...))
```

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏
- [ ] –õ–∏—Å—Ç–∏–Ω–≥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã
- [ ] –ü–∞–≥–∏–Ω–∞—Ü–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Changes API —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π refresh token –ø—Ä–∏ 401

---

## –ó–∞–¥–∞—á–∞ 4.4: Cloud File Indexer ‚Äî –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –æ–±–ª–∞—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –û–ø–∏—Å–∞–Ω–∏–µ
–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –∏–∑ Google Drive –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å.

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Flutter)
```dart
// lib/core/services/cloud_indexer_service.dart

class CloudIndexerService {
  final CloudAccountService _accountService;
  final GoogleDriveService _driveService;
  final NativeBridge _bridge;

  /// Full sync ‚Äî –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
  Future<void> fullSync(int accountId, {
    void Function(int indexed, int total)? onProgress,
  });

  /// Incremental sync ‚Äî —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
  Future<void> incrementalSync(int accountId);

  /// Sync all enabled accounts
  Future<void> syncAll();

  /// Schedule periodic sync (every 15 min)
  void startPeriodicSync();
  void stopPeriodicSync();
}
```

### C API –¥–ª—è cloud_files
```c
// familyvault_c.h ‚Äî –¥–æ–±–∞–≤–∏—Ç—å

// Cloud files index
FV_API bool fv_cloud_file_upsert(FVDatabase db, int account_id,
                                  const char* cloud_id, const char* json_metadata);
FV_API bool fv_cloud_file_remove(FVDatabase db, int account_id, const char* cloud_id);
FV_API bool fv_cloud_files_remove_all(FVDatabase db, int account_id);
FV_API char* fv_cloud_files_search(FVDatabase db, const char* query, int limit);
```

### –ê–ª–≥–æ—Ä–∏—Ç–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
```
Full Sync:
1. –ü–æ–ª—É—á–∏—Ç—å watched folders –¥–ª—è –∞–∫–∫–∞—É–Ω—Ç–∞
2. –î–ª—è –∫–∞–∂–¥–æ–π –ø–∞–ø–∫–∏:
   - listAllFiles(q="'folder_id' in parents") —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
   - –ü–æ—Å—Ç—Ä–æ–∏—Ç—å path
   - Upsert –≤ cloud_files
3. –ü–æ–ª—É—á–∏—Ç—å startPageToken
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ cloud_accounts.change_token

Incremental Sync:
1. –ü–æ–ª—É—á–∏—Ç—å change_token –∏–∑ cloud_accounts
2. getChanges(pageToken)
3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —Ñ–∞–π–ª –≤–Ω—É—Ç—Ä–∏ watched folders (—Ç—Ä–µ–±—É–µ—Ç –∫—ç—à–∞ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ parents)
   - removed ‚Üí DELETE –∏–∑ cloud_files
   - changed ‚Üí UPSERT –≤ cloud_files
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å newStartPageToken
```

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏
- [ ] Full sync –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã
- [ ] Incremental sync —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Changes API
- [ ] –£–¥–∞–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –∏–Ω–¥–µ–∫—Å–∞
- [ ] Progress callback —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

---

## –ó–∞–¥–∞—á–∞ 4.5: Unified Search ‚Äî –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–π –ø–æ–∏—Å–∫

### –û–ø–∏—Å–∞–Ω–∏–µ
–û–±–Ω–æ–≤–∏—Ç—å –ø–æ–∏—Å–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –∏ –æ–±–ª–∞—á–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏.

### C API —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
```c
// familyvault_c.h ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å fv_search

/// Unified search across local and cloud files
/// Returns JSON with "local" and "cloud" arrays
FV_API char* fv_search_unified(FVDatabase db, const char* query, 
                                int local_limit, int cloud_limit);
```

### SQL –¥–ª—è unified search
```sql
-- Local files
SELECT 
    'local' as source,
    f.id, f.name, f.relative_path as path, f.mime_type,
    f.size, f.modified_at, wf.path as folder_path,
    NULL as web_view_url, NULL as thumbnail_url
FROM files f
JOIN watched_folders wf ON f.folder_id = wf.id
WHERE f.id IN (
    SELECT rowid FROM files_fts WHERE files_fts MATCH ?
)
LIMIT ?

UNION ALL

-- Cloud files  
SELECT
    'cloud' as source,
    cf.id, cf.name, cf.path, cf.mime_type,
    cf.size, cf.modified_at, ca.email as folder_path,
    cf.web_view_url, cf.thumbnail_url
FROM cloud_files cf
JOIN cloud_accounts ca ON cf.account_id = ca.id
WHERE ca.enabled = 1 AND cf.id IN (
    SELECT rowid FROM cloud_files_fts WHERE cloud_files_fts MATCH ?
)
LIMIT ?

ORDER BY modified_at DESC
```

### UI –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```dart
// SearchResult —Å source
class SearchResult {
  final String source; // 'local' | 'cloud'
  final int id;
  final String name;
  final String path;
  // ...
  final String? webViewUrl;     // Cloud only
  final String? thumbnailUrl;   // Cloud only
  
  bool get isCloud => source == 'cloud';
  bool get isLocal => source == 'local';
}

// –í UI —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:
ListTile(
  leading: result.isCloud 
    ? Icon(Icons.cloud) 
    : Icon(Icons.folder),
  title: Text(result.name),
  subtitle: Text(result.isCloud 
    ? '‚òÅÔ∏è ${result.path}' 
    : 'üíª ${result.path}'),
  trailing: result.isCloud
    ? IconButton(
        icon: Icon(Icons.open_in_new),
        onPressed: () => launchUrl(result.webViewUrl!),
      )
    : null,
)
```

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏
- [ ] –ü–æ–∏—Å–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏ –æ–±–ª–∞—á–Ω—ã–µ —Ñ–∞–π–ª—ã
- [ ] –ò—Å—Ç–æ—á–Ω–∏–∫ –≤–∏–∑—É–∞–ª—å–Ω–æ —Ä–∞–∑–ª–∏—á–∞–µ—Ç—Å—è
- [ ] –û–±–ª–∞—á–Ω—ã–µ —Ñ–∞–π–ª—ã –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- [ ] –ú–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É

---

## –ó–∞–¥–∞—á–∞ 4.6: Flutter UI ‚Äî Cloud Settings

### –û–ø–∏—Å–∞–Ω–∏–µ
UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±–ª–∞—á–Ω—ã–º–∏ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏.

### –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã
```dart
// lib/core/providers/cloud_providers.dart

@riverpod
class CloudAccounts extends _$CloudAccounts {
  @override
  Future<List<CloudAccount>> build() async {
    return ref.watch(cloudAccountServiceProvider).getAccounts();
  }

  Future<void> addGoogleDrive() async {
    await ref.read(cloudAccountServiceProvider).addGoogleDriveAccount();
    ref.invalidateSelf();
  }

  Future<void> remove(int accountId) async {
    await ref.read(cloudAccountServiceProvider).removeAccount(accountId);
    ref.invalidateSelf();
  }

  Future<void> sync(int accountId) async {
    await ref.read(cloudIndexerServiceProvider).fullSync(accountId);
    ref.invalidateSelf();
  }
}

@riverpod
Stream<SyncProgress> syncProgress(SyncProgressRef ref, int accountId) {
  // Stream sync progress
}
```

### –≠–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–µ–∫
```dart
// lib/features/settings/cloud_accounts_screen.dart

class CloudAccountsScreen extends ConsumerWidget {
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final accounts = ref.watch(cloudAccountsProvider);

    return Scaffold(
      appBar: AppBar(title: Text('Cloud Accounts')),
      body: accounts.when(
        data: (list) => ListView(
          children: [
            // Existing accounts
            for (final account in list)
              CloudAccountTile(
                account: account,
                onSync: () => ref.read(cloudAccountsProvider.notifier)
                    .sync(account.id),
                onManageFolders: () => Navigator.pushNamed(
                    context, '/settings/cloud/folders', arguments: account),
                onRemove: () => ref.read(cloudAccountsProvider.notifier)
                    .remove(account.id),
              ),
            
            // Add new
            ListTile(
              leading: Icon(Icons.add),
              title: Text('Connect Google Drive'),
              onTap: () => ref.read(cloudAccountsProvider.notifier)
                  .addGoogleDrive(),
            ),
          ],
        ),
        loading: () => CircularProgressIndicator(),
        error: (e, _) => Text('Error: $e'),
      ),
    );
  }
}
```

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏
- [ ] –°–ø–∏—Å–æ–∫ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [ ] –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å Google Drive —á–µ—Ä–µ–∑ OAuth
- [ ] –ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç
- [ ] –°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [ ] –ö–Ω–æ–ø–∫–∞ "Sync Now" —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## –ó–∞–¥–∞—á–∞ 4.7: –¢–µ—Å—Ç—ã

### Unit —Ç–µ—Å—Ç—ã (Dart)
```dart
// test/services/google_auth_service_test.dart
// - Mock OAuth responses
// - Test token refresh
// - Test PKCE generation

// test/services/google_drive_service_test.dart
// - Mock Drive API responses
// - Test pagination
// - Test error handling
```

### Integration —Ç–µ—Å—Ç—ã (—Å mock —Å–µ—Ä–≤–µ—Ä–æ–º)
```dart
// test/integration/cloud_sync_test.dart
// - Full sync flow
// - Incremental sync
// - Account removal cleanup
```

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏
- [ ] –¢–µ—Å—Ç—ã –Ω–µ —Ç—Ä–µ–±—É—é—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ Google –∞–∫–∫–∞—É–Ω—Ç–∞
- [ ] Mock —Å–µ—Ä–≤–µ—Ä –¥–ª—è API responses
- [ ] –ü–æ–∫—Ä—ã—Ç—ã –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- [ ] CI –ø—Ä–æ—Ö–æ–¥–∏—Ç

---

## –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

```
4.0 –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –º–∏–≥—Ä–∞—Ü–∏—è –ë–î        [2-3 —á–∞—Å–∞]
     ‚Üì
4.1 OAuth2 Service                    [4-6 —á–∞—Å–æ–≤]
     ‚Üì
4.2 Cloud Account Manager             [3-4 —á–∞—Å–∞]
     ‚Üì
4.3 Google Drive Client               [4-5 —á–∞—Å–æ–≤]
     ‚Üì
4.4 Cloud File Indexer                [4-5 —á–∞—Å–æ–≤]
     ‚Üì
4.5 Unified Search                    [3-4 —á–∞—Å–∞]
     ‚Üì
4.6 Flutter UI                        [4-5 —á–∞—Å–æ–≤]
     ‚Üì
4.7 –¢–µ—Å—Ç—ã                             [3-4 —á–∞—Å–∞]

–ò—Ç–æ–≥–æ: ~28-36 —á–∞—Å–æ–≤
```

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å!)

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `app/lib/config/google_credentials.dart`:
```dart
// –ù–ï –ö–û–ú–ú–ò–¢–ò–¢–¨! –î–æ–±–∞–≤–∏—Ç—å –≤ .gitignore

const googleClientId = 'YOUR_CLIENT_ID.apps.googleusercontent.com';
const googleClientSecret = 'YOUR_CLIENT_SECRET'; // Desktop only
```

–î–æ–±–∞–≤–∏—Ç—å –≤ `.gitignore`:
```
app/lib/config/google_credentials.dart
```
